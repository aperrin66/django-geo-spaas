{% extends "base_viewer/origin_of_templates.html" %}

{% load leaflet_tags %}

{% block searchbox %}

{% endblock searchbox %}
##############################################################################################################
##############################################################################################################
##############################################################################################################
##############################################################################################################
##############################################################################################################
{% block content_result %}
<table border=1 width='100%' height='100%'>
    <!-- HEADER -->
    <tr>
        {% block headers %}
        <th>Filename</th>
        {% endblock headers %}
        <th>Show</th>
    </tr>

    {% if datasets %}

    {% for ds in datasets %}
    <tr id={{ forloop.counter }}>

        {% block columns %}
        <td>
            {% for url in ds.dataseturi_set.all %}
            {% if url.uri|slice:":4" == 'file'%}
            Local file (ingested offline)<br>
            {% else %}
            {{ url.uri|default_if_none:"no URL"|urlizetrunc:100}} <br>
            {% endif %}
            {% endfor %}
        </td>
        {% endblock columns %}

        <td><input class='dsOverlay' type="checkbox" name="{{ forloop.counter }}" id="{{ forloop.counter }}">
        </td>
    </tr>
    {% endfor %}

    {% else %}
    <tr>
        <td colspan=10>No datasets are available.</td>
    </tr>
    {% endif %}
</table>
{% endblock content_result %}
##############################################################################################################
##############################################################################################################
##############################################################################################################
##############################################################################################################
##############################################################################################################
{% block contentmap %}

<form method="post" width='100%' height='100%'>
    {% csrf_token %}

    {{ formi.as_p }}

    <input type="submit" value="Search all meta-data" />
</form>
{% endblock contentmap %}
